[user]
	name = Nicolas Morel
	email = nicolas@morel.io
	useConfigOnly = true

[color]
	ui = auto

[core]
	editor = vim
	excludesfile = ~/.gitignore
	attributesfile = ~/.gitattributes
	autocrlf = input

[branch]
	autosetuprebase = always

[alias]
	aliases = "!git config --get-regexp 'alias.*' | colrm 1 6 | sed 's/[ ]/ = /'"

	# Simple aliases
	c = commit
	co = checkout
	st = status -sb
	p = pull --all --prune
	rh = reset --hard

	# Commit stuff
	ca = commit -av
	cf = commit --fixup=HEAD
	caf = commit -a --fixup=HEAD
	cs = commit -ev --squash=HEAD
	cas = commit -eav --squash=HEAD
	amend = commit --amend
	ai = add -i
	unadd = rm -r --cached
	rom = rebase origin/master

	# Diff stuff
	in = "!git rup; git log ..@{u}"
	out = log @{u}..
	din = "!git rup; git d ..@{u} -p"
	dout = diff -w @{u}..
	dpin = "!git rup; git log ..@{u} -p"
	dpout = log @{u}.. -p
	lin = "!git rup; git log ..@{u} --oneline"
	lout =log @{u}.. --oneline
	slin = "!git submodule foreach git lin"
	slout = "!git submodule foreach git lout"
	d = diff -w
	ds = diff -w --cached

	# Tree navigation
	glog = log --oneline --decorate --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr - %cD) %C(bold blue)<%an>%Creset'
	glogg = "!git glog --branches --remotes"
	glogs = "!git glog --stat"
	gloggs = "!git glogg --stat"

	# Branch stuff
	tracking-branch = rev-parse --abbrev-ref --symbolic-full-name "@{u}"
	current-branch = rev-parse --abbrev-ref --symbolic-full-name HEAD
	ri = rebase -i --autosquash
	rup = remote update -p
	undo = reset --soft HEAD^
	track = checkout -t
	rebranch = "!f() { git branch \"$1\" HEAD && git reset --hard @{u} && git checkout \"$1\"; };f"
	trim = "!git branch -vv | grep gone | tr -s ' ' | cut -d' ' -f2 | xargs --no-run-if-empty -n 1 git branch -d"
	brune = "!git branch --merged $(git tracking-branch) | sed -e s/\\\\*//g | grep -v \"$(git current-branch)$\" | xargs --no-run-if-empty git branch -d"
	rbrune = "!git branch -r --merged $(git tracking-branch) | sed -e s/\\\\*//g | grep -v \"$(git current-branch)$\" | awk -F/ '{print $2}' | xargs --no-run-if-empty git push --no-verify origin --delete"
	drbrune = "!git branch -r --merged $(git tracking-branch) | sed -e s/\\\\*//g | grep -v \"$(git current-branch)$\" | awk -F/ '{print $2}' | xargs --no-run-if-empty git push --no-verify --dry-run origin --delete"

	# Some tools
	h = rev-list --max-count=1 HEAD
	stats = "!git log --format='%C(bold blue)%aN%Creset <%C(yellow)%aE%Creset>' | awk '{arr[$0]++} END{for (i in arr){print arr[i], i;}}' | sort -rn"
	gstats = "!git log --branches --format='%C(bold blue)%aN%Creset <%C(yellow)%aE%Creset>' | awk '{arr[$0]++} END{for (i in arr){print arr[i], i;}}' | sort -rn"
	root = rev-parse --show-toplevel
	pack = "!git archive HEAD --format=tar | gzip > ./`git h`.tar.gz"
	ignore= "!([ ! -e .gitignore ] && touch .gitignore) | echo $1 >>.gitignore"
	su = submodule foreach git pull
	serve = "!git daemon --reuseaddr --verbose --base-path=. --export-all ./.git"
	wserve = "!git daemon --reuseaddr --verbose --enable=receive-pack --base-path=. --export-all ./.git"
	ignored = ls-files --others -i --exclude-standard
	include = config include.path

[push]
	default = tracking
	followTags = true

[rerere]
	enabled = 1

[merge]
	tool = kdiff3
	conflictstyle = diff3

[mergetool]
	prompt = false
	keepBackup = false
	keepTemporaries = false

[diff]
	renames = copies
	mnemonicPrefix = true
	wordRegex = .
	indentHeuristic = true

[fetch]
	recurseSubmodules = true

[status]
	submoduleSummary = true

[credential]
	helper = cache --timeout=14400
[rebase]
	autostash = true
[receive]
	fsckObjects = true
[i18n]
	logOutputEncoding = UTF-8
